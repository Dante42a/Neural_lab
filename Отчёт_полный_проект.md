# –ó–∞–¥–∞–Ω–∏–µ: –ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ –∏—Å–∫—É—Å—Å—Ç–≤–µ–Ω–Ω—ã—Ö –Ω–µ–π—Ä–æ–Ω–Ω—ã—Ö —Å–µ—Ç–µ–π –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞ –∑–∞–ø–æ–ª–Ω–µ–Ω–Ω–æ—Å—Ç–∏ –∑–∞–ª–∞ —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º –ø—Ä–µ–¥–æ–±—É—á–µ–Ω–Ω—ã—Ö –º–æ–¥–µ–ª–µ–π YOLOv8

## 1. –¶–µ–ª—å –ø—Ä–∞–∫—Ç–∏–∫–∏

–û—Å–≤–æ–∏—Ç—å –ø–æ–ª–Ω—ã–π —Ü–∏–∫–ª —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ —Å–∏—Å—Ç–µ–º—ã –∏—Å–∫—É—Å—Å—Ç–≤–µ–Ω–Ω–æ–≥–æ –∏–Ω—Ç–µ–ª–ª–µ–∫—Ç–∞ –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞ –∑–∞–ø–æ–ª–Ω–µ–Ω–Ω–æ—Å—Ç–∏ –∑–∞–ª–∞: –æ—Ç –≤—ã–±–æ—Ä–∞ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã –Ω–µ–π—Ä–æ–Ω–Ω–æ–π —Å–µ—Ç–∏ –¥–æ –≤–Ω–µ–¥—Ä–µ–Ω–∏—è –º–æ–¥–µ–ª–∏ –≤ –≤–µ–±-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ —Å –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏–µ–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ –∏ –≥–µ–Ω–µ—Ä–∞—Ü–∏–µ–π –æ—Ç—á—ë—Ç–æ–≤.

### –≠—Ç–∞–ø—ã –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è:

#### 1.1 –í—ã–±–æ—Ä –∑–∞–¥–∞—á–∏ –∏ –º–æ–¥–µ–ª–∏
- **–ó–∞–¥–∞—á–∞:** –ê–Ω–∞–ª–∏–∑ –∑–∞–ø–æ–ª–Ω–µ–Ω–Ω–æ—Å—Ç–∏ –∑–∞–ª–∞ –ø—É—Ç—ë–º –¥–µ—Ç–µ–∫—Ü–∏–∏ —Å—Ç—É–ª—å–µ–≤ –∏ –ª—é–¥–µ–π, –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ —Å–≤–æ–±–æ–¥–Ω—ã—Ö –∏ –∑–∞–Ω—è—Ç—ã—Ö –º–µ—Å—Ç
- **–ú–æ–¥–µ–ª—å:** YOLOv8 (You Only Look Once v8) ‚Äî —Å–æ–≤—Ä–µ–º–µ–Ω–Ω–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –¥–ª—è –¥–µ—Ç–µ–∫—Ü–∏–∏ –æ–±—ä–µ–∫—Ç–æ–≤
- **–ö–ª–∞—Å—Å—ã –æ–±—ä–µ–∫—Ç–æ–≤:** –°—Ç—É–ª—å—è (56), –õ—é–¥–∏ (0) –≤ –¥–∞—Ç–∞—Å–µ—Ç–µ COCO

#### 1.2 –°–∫–∞—á–∏–≤–∞–Ω–∏–µ –∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ –º–æ–¥–µ–ª–∏
```python
# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
pip install ultralytics torch torchvision opencv-python flask

# –ó–∞–≥—Ä—É–∑–∫–∞ –º–æ–¥–µ–ª–∏ YOLOv8
from ultralytics import YOLO
model = YOLO('yolov8n.pt')  # –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –∑–∞–≥—Ä—É–∑–∫–∞ —Å GitHub
```

## 2. –†–∞–∑—Ä–∞–±–æ—Ç–∫–∞ –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞

### 2.1 –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
- **–ë—ç–∫–µ–Ω–¥:** Flask (Python) —Å REST API
- **–§—Ä–æ–Ω—Ç–µ–Ω–¥:** HTML/CSS/JavaScript —Å —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–º –¥–∏–∑–∞–π–Ω–æ–º
- **–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö:** SQLite –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è –∏—Å—Ç–æ—Ä–∏–∏ –∑–∞–ø—Ä–æ—Å–æ–≤
- **–§–∞–π–ª–æ–≤–æ–µ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ:** –õ–æ–∫–∞–ª—å–Ω–∞—è —Ñ–∞–π–ª–æ–≤–∞—è —Å–∏—Å—Ç–µ–º–∞

### 2.2 –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª –≤–µ–±-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
- –ó–∞–≥—Ä—É–∑–∫–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π —á–µ—Ä–µ–∑ drag-and-drop –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º YOLOv8
- –í–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ —Å bounding boxes
- –ü–æ–¥—Å—á—ë—Ç –ª—é–¥–µ–π, —Å—Ç—É–ª—å–µ–≤, —Å–≤–æ–±–æ–¥–Ω—ã—Ö –∏ –∑–∞–Ω—è—Ç—ã—Ö –º–µ—Å—Ç
- –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –∏—Å—Ç–æ—Ä–∏–∏ –∞–Ω–∞–ª–∏–∑–æ–≤
- –ì–µ–Ω–µ—Ä–∞—Ü–∏—è JSON –æ—Ç—á—ë—Ç–æ–≤
- –ê–¥–∞–ø—Ç–∏–≤–Ω—ã–π –¥–∏–∑–∞–π–Ω –¥–ª—è —Ä–∞–∑–ª–∏—á–Ω—ã—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤

## 3. –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –º–æ–¥–µ–ª–∏

### 3.1 –õ–æ–≥–∏–∫–∞ –∞–Ω–∞–ª–∏–∑–∞ –∑–∞–ø–æ–ª–Ω–µ–Ω–Ω–æ—Å—Ç–∏
- –î–µ—Ç–µ–∫—Ç–∏—Ä—É—é—Ç—Å—è –≤—Å–µ —Å—Ç—É–ª—å—è –∏ –ª—é–¥–∏ –Ω–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–∏.
- **–ó–∞–Ω—è—Ç—ã–µ –º–µ—Å—Ç–∞** = –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –ª—é–¥–µ–π (–∏–ª–∏ –ø–æ —Å–æ–≤–ø–∞–¥–µ–Ω–∏—é –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç ‚Äî –º–æ–∂–Ω–æ –¥–æ—Ä–∞–±–æ—Ç–∞—Ç—å).
- **–°–≤–æ–±–æ–¥–Ω—ã–µ –º–µ—Å—Ç–∞** = –æ–±—â–µ–µ —á–∏—Å–ª–æ —Å—Ç—É–ª—å–µ–≤ –º–∏–Ω—É—Å –∑–∞–Ω—è—Ç—ã–µ.
- –í–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è: —Å–≤–æ–±–æ–¥–Ω—ã–µ —Å—Ç—É–ª—å—è ‚Äî –∑–µ–ª—ë–Ω—ã–µ, –∑–∞–Ω—è—Ç—ã–µ ‚Äî –∫—Ä–∞—Å–Ω—ã–µ, –ª—é–¥–∏ ‚Äî —Å–∏–Ω–∏–µ.

### 3.2 –ü—Ä–∏–º–µ—Ä –∫–æ–¥–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∏
```python
from ultralytics import YOLO
import cv2
CHAIR_CLASS_ID = 56
PERSON_CLASS_ID = 0
model = YOLO('yolov8n.pt')

def analyze_hall_occupancy(image_path):
    img = cv2.imread(image_path)
    results = model(img)[0]
    chairs = []
    people = []
    for box in results.boxes:
        class_id = int(box.cls)
        if class_id == CHAIR_CLASS_ID:
            chairs.append(box.xyxy[0].cpu().numpy())
        elif class_id == PERSON_CLASS_ID:
            people.append(box.xyxy[0].cpu().numpy())
    occupied_seats = len(people)
    free_seats = max(0, len(chairs) - occupied_seats)
    # ... (–≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è –∏ –≤–æ–∑–≤—Ä–∞—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞)
    return result_img, len(chairs), len(people), occupied_seats, free_seats
```

### 3.3 –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
```sql
CREATE TABLE requests (
    id INTEGER PRIMARY KEY AUTOINCREMENT,
    timestamp TEXT,
    filename TEXT,
    chairs_detected INTEGER,
    people_detected INTEGER,
    occupied_seats INTEGER,
    free_seats INTEGER,
    result_path TEXT
);
```

## 4. –í–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è –∏ –æ—Ç—á—ë—Ç—ã

### 4.1 –í–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å
- –ì–ª–∞–≤–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞: –∑–∞–≥—Ä—É–∑–∫–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è, –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ —á–∏—Å–ª–∞ —Å—Ç—É–ª—å–µ–≤, –ª—é–¥–µ–π, —Å–≤–æ–±–æ–¥–Ω—ã—Ö –∏ –∑–∞–Ω—è—Ç—ã—Ö –º–µ—Å—Ç, –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞.
- –ò—Å—Ç–æ—Ä–∏—è: —Å–ø–∏—Å–æ–∫ –∞–Ω–∞–ª–∏–∑–æ–≤ —Å –ø–æ–¥—Ä–æ–±–Ω–æ–π —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–æ–π –ø–æ –∫–∞–∂–¥–æ–º—É –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—é.
- –û—Ç—á—ë—Ç: JSON —Å —Å—É–º–º–∞—Ä–Ω–æ–π —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–æ–π –ø–æ –≤—Å–µ–º –∞–Ω–∞–ª–∏–∑–∞–º.

#### –ü—Ä–∏–º–µ—Ä –≤—ã–≤–æ–¥–∞ –Ω–∞ –≥–ª–∞–≤–Ω–æ–π:
```
ü™ë –û–±–Ω–∞—Ä—É–∂–µ–Ω–æ —Å—Ç—É–ª—å–µ–≤: 16
üë• –û–±–Ω–∞—Ä—É–∂–µ–Ω–æ –ª—é–¥–µ–π: 3
üî¥ –ó–∞–Ω—è—Ç—ã—Ö –º–µ—Å—Ç: 3
üü¢ –°–≤–æ–±–æ–¥–Ω—ã—Ö –º–µ—Å—Ç: 13
```

#### –ü—Ä–∏–º–µ—Ä –æ—Ç–≤–µ—Ç–∞ API:
```json
{
  "success": true,
  "chairs_detected": 16,
  "people_detected": 3,
  "occupied_seats": 3,
  "free_seats": 13,
  "result_image": "/static/results/result_...jpg",
  "timestamp": "2025-07-12T18:00:00.000000"
}
```

#### –ü—Ä–∏–º–µ—Ä –æ—Ç—á—ë—Ç–∞:
```json
{
  "generated_at": "2025-07-12T18:00:00.000000",
  "total_requests": 2,
  "total_chairs": 32,
  "total_people": 4,
  "total_occupied": 4,
  "total_free": 28,
  "requests": [
    {
      "timestamp": "2025-07-12T17:56:14.356374",
      "filename": "20250712_175613_...jpg",
      "chairs_detected": 16,
      "people_detected": 0,
      "occupied_seats": 0,
      "free_seats": 16
    },
    {
      "timestamp": "2025-07-12T18:00:00.000000",
      "filename": "20250712_180000_...jpg",
      "chairs_detected": 16,
      "people_detected": 4,
      "occupied_seats": 4,
      "free_seats": 12
    }
  ]
}
```

## 5. –ó–∞–ø—É—Å–∫ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è

### 5.1 –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
```bash
python -m venv .venv
source .venv/bin/activate
pip install -r requirements.txt
```

### 5.2 requirements.txt
```
flask==2.3.3
opencv-python==4.8.1.78
numpy==1.24.3
ultralytics==8.0.196
torch==2.2.0
torchvision==0.17.0
```

### 5.3 –ó–∞–ø—É—Å–∫
```bash
python app.py
# –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –¥–æ—Å—Ç—É–ø–Ω–æ –ø–æ –∞–¥—Ä–µ—Å—É: http://localhost:5001
```

## 6. –†–µ–∑—É–ª—å—Ç–∞—Ç—ã —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

- ‚úÖ –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ —É—Å–ø–µ—à–Ω–æ –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å—Ç—É–ª—å–µ–≤, –ª—é–¥–µ–π, —Å–≤–æ–±–æ–¥–Ω—ã—Ö –∏ –∑–∞–Ω—è—Ç—ã—Ö –º–µ—Å—Ç
- ‚úÖ –í—Å—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è –≤ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–µ, –∏—Å—Ç–æ—Ä–∏–∏ –∏ –æ—Ç—á—ë—Ç–µ
- ‚úÖ API –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Ä–∞—Å—à–∏—Ä–µ–Ω–Ω—ã–π –æ—Ç–≤–µ—Ç
- ‚úÖ –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å: ~69ms –Ω–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ (Mac M1)
- ‚úÖ –°–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å: macOS M1, torch 2.2.0, ultralytics 8.0.196

## 7. –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
Neural_lab/
‚îú‚îÄ‚îÄ app.py                 # Flask –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
‚îú‚îÄ‚îÄ requirements.txt       # –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
‚îú‚îÄ‚îÄ README.md              # –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
‚îú‚îÄ‚îÄ .gitignore             # –ò—Å–∫–ª—é—á–µ–Ω–∏—è –¥–ª—è Git
‚îú‚îÄ‚îÄ yolov8n.pt             # –ú–æ–¥–µ–ª—å YOLOv8
‚îú‚îÄ‚îÄ history.db             # –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö
‚îú‚îÄ‚îÄ static/
‚îÇ   ‚îú‚îÄ‚îÄ uploads/           # –ó–∞–≥—Ä—É–∂–µ–Ω–Ω—ã–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è
‚îÇ   ‚îî‚îÄ‚îÄ results/           # –†–µ–∑—É–ª—å—Ç–∞—Ç—ã –æ–±—Ä–∞–±–æ—Ç–∫–∏
‚îî‚îÄ‚îÄ templates/
    ‚îú‚îÄ‚îÄ index.html         # –ì–ª–∞–≤–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞
    ‚îî‚îÄ‚îÄ history.html       # –ò—Å—Ç–æ—Ä–∏—è
```

## 8. –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ –¥–ª—è —Ä–∞–∑–≤–∏—Ç–∏—è
- –£–ª—É—á—à–µ–Ω–∏–µ –ª–æ–≥–∏–∫–∏ —Å–æ–ø–æ—Å—Ç–∞–≤–ª–µ–Ω–∏—è –ª—é–¥–µ–π –∏ —Å—Ç—É–ª—å–µ–≤ (–ø–æ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç–∞–º)
- –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –∫–∞–º–µ—Ä–∞–º–∏ –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏
- –≠–∫—Å–ø–æ—Ä—Ç –æ—Ç—á—ë—Ç–æ–≤ –≤ Excel/PDF
- –ú–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ —Å –ø–æ–º–æ—â—å—é Docker

## 9. –ó–∞–∫–ª—é—á–µ–Ω–∏–µ

–†–∞–∑—Ä–∞–±–æ—Ç–∞–Ω–Ω–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –ø–æ–∑–≤–æ–ª—è–µ—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∞–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å –∑–∞–ø–æ–ª–Ω–µ–Ω–Ω–æ—Å—Ç—å –∑–∞–ª–∞ –ø–æ —Å—Ç—É–ª—å—è–º –∏ –ª—é–¥—è–º, –æ–ø—Ä–µ–¥–µ–ª—è—Ç—å –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å–≤–æ–±–æ–¥–Ω—ã—Ö –∏ –∑–∞–Ω—è—Ç—ã—Ö –º–µ—Å—Ç, —Å–æ—Ö—Ä–∞–Ω—è—Ç—å –∏—Å—Ç–æ—Ä–∏—é –∏ —Ñ–æ—Ä–º–∏—Ä–æ–≤–∞—Ç—å –æ—Ç—á—ë—Ç—ã. –†–µ—à–µ–Ω–∏–µ –≥–æ—Ç–æ–≤–æ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é –∏ –¥–∞–ª—å–Ω–µ–π—à–µ–º—É —Ä–∞–∑–≤–∏—Ç–∏—é.

---

**–ê–≤—Ç–æ—Ä:** –°—Ç—É–¥–µ–Ω—Ç –ú–¢–£–°–ò  
**–î–∞—Ç–∞:** 12 –∏—é–ª—è 2025  
**–í–µ—Ä—Å–∏—è:** 1.1  
**–°—Ç–∞—Ç—É—Å:** –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–æ –∏ –≥–æ—Ç–æ–≤–æ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é 